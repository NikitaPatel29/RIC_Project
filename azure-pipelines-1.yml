trigger:
- main

pool:
  vmImage: 'ubuntu-latest'

jobs:
- job: CreateEC2Instance
  displayName: Create EC2 Instance
  steps:
  - task: UsePythonVersion@0
    inputs:
      versionSpec: '3.x'
      addToPath: true
  - script: |
      # Install AWS CLI
      pip install awscli --upgrade --user
      
      # Configure AWS CLI with your credentials
      aws configure set aws_access_key_id AKIA4FI7OAZSYU3LBBYP
      aws configure set aws_secret_access_key tZ0lau24zkCEhDTHvN5de+lx2OoV3xBsT+XHK6vE
      aws configure set default.region us-east-1
      
      # Create EC2 instance
      instance_id=$(aws ec2 run-instances --image-id ami-053b0d53c279acc90 --instance-type t2.micro --key-name 21224811_RIC --query 'Instances[0].InstanceId' --output text)
      
      # Wait for instance to be running
      aws ec2 wait instance-running --instance-ids $instance_id
    displayName: Create EC2 Instance
